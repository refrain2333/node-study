# TypeScript 基础类型 - 快速参考

## 基本类型

| 类型 | 说明 | 例子 |
|------|------|------|
| `string` | 字符串 | `let name: string = "张三"` |
| `number` | 数字 | `let age: number = 25` |
| `boolean` | 布尔值 | `let active: boolean = true` |
| `undefined` | 未定义 | `let x: undefined = undefined` |
| `null` | 空 | `let x: null = null` |
| `any` | 任意类型（避免） | `let x: any = "anything"` |
| `void` | 无返回值 | `function fn(): void {}` |
| `never` | 永不返回 | `function fn(): never { throw new Error() }` |
| `unknown` | 未知类型 | `let x: unknown = value` |

## 数组和元组

```typescript
// 数组
const numbers: number[] = [1, 2, 3];
const strings: Array<string> = ["a", "b"];
const mixed: (string | number)[] = [1, "a"];

// 元组
const tuple: [string, number] = ["hello", 42];
const optional: [string, number?] = ["hello"];
const rest: [string, ...number[]] = ["a", 1, 2, 3];
```

## 联合和交叉类型

```typescript
// 联合类型：A 或 B
type StringOrNumber = string | number;
type Status = "success" | "error" | "pending";

// 交叉类型：A 且 B
type AB = A & B;
```

## 字面量类型

```typescript
// 字符串字面量
type Direction = "up" | "down" | "left" | "right";

// 数字字面量
type Digit = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9;

// 布尔字面量
type Flag = true | false;
```

## 枚举

```typescript
// 数字枚举
enum Direction {
  Up = 0,
  Down = 1,
  Left = 2,
  Right = 3
}

// 字符串枚举（推荐）
enum Status {
  Active = "ACTIVE",
  Inactive = "INACTIVE"
}

// 使用
const dir: Direction = Direction.Up;
const status: Status = Status.Active;
```

## 对象类型

```typescript
// 对象字面量
interface User {
  name: string;        // 必需属性
  age: number;
  email?: string;      // 可选属性
  readonly id: number; // 只读属性
}

// 索引签名
interface StringIndex {
  [key: string]: string;
}

// 使用
const user: User = { name: "张三", age: 25 };
user.email = "zhangsan@example.com"; // ✓
// user.id = 2; // ❌ 错误，id 是只读的
```

## 函数类型

```typescript
// 方式 1：直接标注
function add(a: number, b: number): number {
  return a + b;
}

// 方式 2：类型别名
type MathFn = (a: number, b: number) => number;
const multiply: MathFn = (a, b) => a * b;

// 方式 3：接口
interface Callback {
  (error: Error | null, data?: string): void;
}
```

## 类型守护（Type Guard）

```typescript
// typeof 守护
if (typeof value === "string") {
  // 在这里 value 是 string 类型
}

// instanceof 守护
if (obj instanceof Date) {
  // 在这里 obj 是 Date 类型
}

// in 守护
if ("name" in obj) {
  // 在这里 obj 有 name 属性
}

// 自定义守护
function isString(value: any): value is string {
  return typeof value === "string";
}
```

## 类型断言

```typescript
// 方式 1
const str = (value as string).toUpperCase();

// 方式 2（JSX 中使用第一种）
const str = (<string>value).toUpperCase();

// ⚠️ 不要过度使用，会失去类型检查
```

## 常见模式

### 条件类型表达式

```typescript
// 如果 T 是 string，返回 true，否则返回 false
type IsString<T> = T extends string ? true : false;

// 提取 Promise 的值类型
type Awaited<T> = T extends Promise<infer R> ? R : T;
```

### 类型兼容性

```typescript
// 结构化类型：只要结构相同就兼容
interface Point {
  x: number;
  y: number;
}

// 这个对象可以用作 Point，因为有 x 和 y
const point = { x: 10, y: 20, z: 30 };
const p: Point = point; // ✓ 正确
```

## 最佳实践

### ✅ 应该做

```typescript
// 1. 显式标注函数参数和返回值
function process(data: string): number {
  return data.length;
}

// 2. 对复杂对象使用 interface 或 type
interface User {
  id: number;
  name: string;
}

// 3. 使用联合类型限制值
type Status = "success" | "error" | "pending";

// 4. 使用只读修饰符保护不应改变的属性
interface Config {
  readonly version: string;
}

// 5. 利用类型推导，不过度标注
const count = 10; // ✓ 自动推导为 number
```

### ❌ 避免

```typescript
// 1. 不要使用 any
let value: any = "anything"; // ❌

// 2. 不要过度使用类型断言
const value = (unknownData as string).length; // ❌ 可能 crash

// 3. 不要为明显的类型重复标注
const name: string = "张三"; // ❌ 可以省略

// 4. 不要混用 interface 和 type
// 选择其中一个并保持一致
```

## 与 Python 对比

| Python | TypeScript |
|--------|-----------|
| `str` | `string` |
| `int, float` | `number` |
| `bool` | `boolean` |
| `List[str]` | `string[]` |
| `Dict[str, int]` | `Record<string, number>` |
| `Union[str, int]` | `string \| number` |
| `Optional[str]` | `string \| undefined` 或 `string?` |
| `None` | `null \| undefined` |
| 类型注解可选 | 类型注解通常必需 |

## 编译检查

```bash
# 检查 TypeScript 文件
tsc --noEmit 基础类型基础.ts

# 编译 TypeScript 文件
tsc 基础类型基础.ts

# 严格模式（推荐）
tsc --strict 文件名.ts
```

## 常见错误和解决

### 错误1：Property does not exist

```typescript
// ❌ 错误
const user: { name: string } = { name: "张三" };
console.log(user.age); // ❌ age 不存在

// ✅ 修正
interface User {
  name: string;
  age?: number;
}
const user: User = { name: "张三" };
```

### 错误2：Type is not assignable

```typescript
// ❌ 错误
const value: number = "123";

// ✅ 修正
const value: number = parseInt("123");
// 或
const value: string = "123";
```

### 错误3：Cannot read property

```typescript
// ❌ 错误
let value: unknown = "hello";
console.log(value.length); // value 可能没有 length

// ✅ 修正
if (typeof value === "string") {
  console.log(value.length);
}
```
